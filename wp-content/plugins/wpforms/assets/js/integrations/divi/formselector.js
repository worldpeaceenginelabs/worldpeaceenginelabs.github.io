import React,{Component}from 'react';import PropTypes from 'prop-types';class WPFormsSelector extends Component{static slug='wpforms_selector';constructor(props){super(props);this.state={error:null,isLoading:true,form:null,};}
static get propTypes(){return{form_id:PropTypes.number,show_title:PropTypes.string,show_desc:PropTypes.string,};}
componentDidUpdate(prevProps){if(prevProps.form_id!==this.props.form_id||prevProps.show_title!==this.props.show_title||prevProps.show_desc!==this.props.show_desc){this.componentDidMount();}}
componentDidMount(){var formData=new FormData();formData.append('nonce',wpforms_divi_builder.nonce);formData.append('action','wpforms_divi_preview');formData.append('form_id',this.props.form_id);formData.append('show_title',this.props.show_title);formData.append('show_desc',this.props.show_desc);fetch(wpforms_divi_builder.ajax_url,{method:'POST',cache:'no-cache',credentials:'same-origin',headers:{'Content-Type':'application/x-www-form-urlencoded','Cache-Control':'no-cache',},body:new URLSearchParams(formData),},).then(res=>res.json()).then((result)=>{this.setState({isLoading:false,form:result.data,});},(error)=>{this.setState({isLoading:false,error,});},);}
render(){var{error,isLoaded,form}=this.state,wrapperClasses=isLoaded?'wpforms-divi-form-preview loading':'wpforms-divi-form-preview';if(error||!form){return(<div className="wpforms-divi-form-placeholder"><img src={wpforms_divi_builder.placeholder}/><h3>{wpforms_divi_builder.placeholder_title}</h3></div>);}
return(<div className={wrapperClasses}>{<div dangerouslySetInnerHTML={{__html:form}}/>}</div>);}}
jQuery(window).on('et_builder_api_ready',(event,API)=>{API.registerModules([WPFormsSelector]);}).on('wpformsDiviModuleDisplay',(event)=>{window.wpforms.init();});jQuery(document).on('wpformsReady',(event)=>{var $=jQuery;$('.choicesjs-select').each(function(){var $instance=$(this).data('choicesjs');if(!$instance||typeof $instance.disable!=='function'){return;}
$instance.disable();});});