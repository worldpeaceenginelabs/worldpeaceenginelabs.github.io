'use strict';var WPFormsChallenge=window.WPFormsChallenge||{};WPFormsChallenge.admin=window.WPFormsChallenge.admin||(function(document,window,$){var app={l10n:wpforms_challenge_admin,init:function(){$(app.ready);},ready:function(){app.events();},events:function(){$('.wpforms-challenge-list-block').on('click','.challenge-skip',app.skipChallenge).on('click','.challenge-cancel',app.cancelChallenge).on('click','.toggle-list',app.toggleList);},toggleList:function(e){var $icon=$(e.target),$listBlock=$('.wpforms-challenge-list-block');if(!$listBlock.length||!$icon.length){return;}
if($listBlock.hasClass('closed')){wpforms_challenge_admin.option.window_closed='0';$listBlock.removeClass('closed');setTimeout(function(){$listBlock.removeClass('transition-back');},600);}else{wpforms_challenge_admin.option.window_closed='1';$listBlock.addClass('closed');setTimeout(function(){$listBlock.addClass('transition-back');},600);}},skipChallenge:function(){var optionData={status:'skipped',seconds_spent:0,seconds_left:app.l10n.minutes_left*60,};$('.wpforms-challenge').remove();app.saveChallengeOption(optionData).done(location.reload.bind(location));},cancelChallenge:function(){var core=WPFormsChallenge.core;core.timer.pause();var optionData={status:'canceled',seconds_spent:core.timer.getSecondsSpent(),seconds_left:core.timer.getSecondsLeft(),feedback_sent:false,};core.removeChallengeUI();core.clearLocalStorage();if(typeof WPFormsBuilder!=='undefined'){WPFormsChallenge.admin.saveChallengeOption(optionData).done(WPFormsBuilder.formSave).done(location.reload.bind(location));}else{WPFormsChallenge.admin.saveChallengeOption(optionData).done(app.triggerPageSave);}},saveChallengeOption:function(optionData){var data={action:'wpforms_challenge_save_option',option_data:optionData,_wpnonce:app.l10n.nonce,};data.option_data.window_closed=wpforms_challenge_admin.option.window_closed;$.extend(wpforms_challenge_admin.option,optionData);return $.post(ajaxurl,data,function(response){if(!response.success){console.error('Error saving WPForms Challenge option.');}});},};return app;}(document,window,jQuery));WPFormsChallenge.admin.init();