'use strict';var WPFormsChallenge=window.WPFormsChallenge||{};WPFormsChallenge.builder=window.WPFormsChallenge.builder||(function(document,window,$){var app={init:function(){$(app.ready);$(window).on('load',function(){if(typeof $.ready.then==='function'){$.ready.then(app.load);}else{app.load();}});},ready:function(){app.setup();app.events();},load:function(){if(['started','paused'].indexOf(wpforms_challenge_admin.option.status)>-1){WPFormsChallenge.core.updateTooltipUI();app.gotoStep();}
$('.wpforms-challenge').show();},setup:function(){if(wpforms_challenge_admin.option.status==='inited'){WPFormsChallenge.core.clearLocalStorage();app.showWelcomePopup();}
$('#wpforms-embed').addClass('wpforms-disabled');var tooltipAnchors=['#wpforms-setup-name','.wpforms-setup-title .wpforms-setup-title-after','#add-fields a i','#wpforms-builder-settings-notifications-title',];$.each(tooltipAnchors,function(i,anchor){WPFormsChallenge.core.initTooltips(i+1,anchor,null);});},events:function(){$('#wpforms-challenge-welcome-builder-popup').on('click','button',app.startChallenge);$('.wpforms-challenge-step1-done').on('click',function(){WPFormsChallenge.core.stepCompleted(1);});$('#wpforms-builder').on('wpformsBuilderSetupReady',function(){app.eventSelectTemplate();}).on('wpformsPanelSwitch wpformsPanelSectionSwitch',function(){WPFormsChallenge.core.updateTooltipUI();});$('.wpforms-challenge-step3-done').on('click',function(){WPFormsChallenge.core.stepCompleted(3);app.gotoStep(4);});$(document).on('click','.wpforms-challenge-step4-done',app.showEmbedPopup);$.tooltipster.on('ready',app.tooltipsterReady);},eventSelectTemplate:function(){$('#wpforms-panel-setup').off('click','.wpforms-template-select').on('click','.wpforms-template-select',function(e){app.builderTemplateSelect(this,e);});},startChallenge:function(){WPFormsChallenge.admin.saveChallengeOption({status:'started'});WPFormsChallenge.core.initListUI('started');$('.wpforms-challenge-popup-container').fadeOut(function(){$('#wpforms-challenge-welcome-builder-popup').hide();});WPFormsChallenge.core.timer.run(WPFormsChallenge.core.timer.initialSecondsLeft);WPFormsChallenge.core.updateTooltipUI();},gotoStep:function(step){step=step||(WPFormsChallenge.core.loadStep()+1);switch(step){case 1:case 2:WPFormsBuilder.panelSwitch('setup');break;case 3:WPFormsBuilder.panelSwitch('fields');break;case 4:WPFormsBuilder.panelSwitch('settings');WPFormsBuilder.panelSectionSwitch($('.wpforms-panel .wpforms-panel-sidebar-section-notifications'));break;case 5:app.showEmbedPopup();break;}},builderTemplateSelect:function(el,e){if(wpforms_challenge_admin.option.status==='paused'){WPFormsChallenge.core.resumeChallenge();}
var step=WPFormsChallenge.core.loadStep();if(step<=1){WPFormsChallenge.core.stepCompleted(2).done(WPForms.Admin.Builder.Setup.selectTemplate.bind(null,e));return;}
WPForms.Admin.Builder.Setup.selectTemplate.bind(null,e);},tooltipsterReady:function(e){var step=$(e.origin).data('wpforms-challenge-step');var formId=$('#wpforms-builder-form').data('id');step=parseInt(step,10)||0;formId=parseInt(formId,10)||0;if(3===step&&formId>0){WPFormsChallenge.admin.saveChallengeOption({form_id:formId});}},showWelcomePopup:function(){$('#wpforms-challenge-welcome-builder-popup').show();$('.wpforms-challenge-popup-container').fadeIn();},showEmbedPopup:function(){WPFormsChallenge.core.stepCompleted(4);WPFormsFormEmbedWizard.openPopup();},};return app;}(document,window,jQuery));WPFormsChallenge.builder.init();