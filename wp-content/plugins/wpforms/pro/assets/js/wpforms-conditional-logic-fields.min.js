!function(k){"use strict";var x={init:function(){k(x.ready),x.bindUIActions()},ready:function(){k(".wpforms-form").each(function(){var e=k(this);x.initDefaultValues(e),x.processConditionals(e,!1)})},initDefaultValues:function(e){e.find(".wpforms-conditional-field input, .wpforms-conditional-field select, .wpforms-conditional-field textarea").each(function(){var e=k(this),t=e.val(),i=e.attr("type"),o=e.prop("tagName");switch(i=-1<["SELECT","BUTTON"].indexOf(o)?o.toLowerCase():i){case"button":case"submit":case"reset":case"hidden":break;case"checkbox":case"radio":e.is(":checked")&&e.attr("data-default-value","checked");break;default:""!==t&&e.attr("data-default-value",t)}})},bindUIActions:function(){k(document).on("change",".wpforms-conditional-trigger input, .wpforms-conditional-trigger select",function(){x.processConditionals(k(this),!0)}),k(document).on("input",".wpforms-conditional-trigger input[type=text], .wpforms-conditional-trigger input[type=email], .wpforms-conditional-trigger input[type=url], .wpforms-conditional-trigger input[type=number], .wpforms-conditional-trigger textarea",function(){x.processConditionals(k(this),!0)}),k(document).on("tinymce-editor-init",function(e,t){t.id.startsWith("wpforms-")&&t.on("keyup",function(){x.processConditionals(k("#"+t.id),!0)})}),k(".wpforms-form").submit(function(){x.resetHiddenFields(k(this))})},resetHiddenFields:function(e){window.location.hash&&"#wpformsdebug"===window.location.hash&&console.log("Resetting hidden fields...");var t,i,o,n,a=k(e);a.find(".wpforms-conditional-hide :input").each(function(){switch(t=k(this),i=t.attr("type"),o=t.prop("tagName"),i=-1<["SELECT","BUTTON"].indexOf(o)?o.toLowerCase():i){case"button":case"submit":case"reset":case"hidden":break;case"checkbox":case"radio":t.closest("ul").find("li").removeClass("wpforms-selected"),(n=t.closest("div.wpforms-field-rating-items")).length&&n.find("label").removeClass("selected"),t.is(":checked")&&t.prop("checked",!1).trigger("change");break;case"select":x.resetHiddenSelectField.init(t);break;default:""!==t.val()&&(t.hasClass("dropzone-input")&&k('[data-name="'+t[0].name+'"]',a)[0]&&k('[data-name="'+t[0].name+'"]',a)[0].dropzone.removeAllFiles(!0),t.val("").trigger("input"))}}),a.find(".wpforms-field-richtext.wpforms-conditional-hide").each(function(){var e=tinyMCE.get("wpforms-"+k(this).closest(".wpforms-form").data("formid")+"-field_"+k(this).data("field-id"));if(!e)return"";e.setContent("")})},resetHiddenSelectField:{$field:null,init:function(e){(this.$field=e).data("choicesjs")?this.modern():this.classic()},modern:function(){var e=this.$field.data("choicesjs"),t=e.getValue(!0);t&&t.length&&(e.removeActiveItems(),this.$field.trigger("change")),this.$field.prop("multiple")?k(e.input.element).removeClass(e.config.classNames.input+"--hidden"):(t=e.config.choices.filter(function(e){return e.placeholder}),Array.isArray(t)&&t.length&&e.setChoiceByValue(t[0].value))},classic:function(){var e=this.$field.find("option.placeholder").length?0:-1;e!==this.$field.prop("selectedIndex")&&this.$field.prop("selectedIndex",e).trigger("change")}},resetToDefaults:function(e){e.find(":input").each(function(){var e=k(this),t=e.attr("data-default-value"),i=e.attr("type"),o=e.prop("tagName");if(void 0!==t)switch(i=-1<["SELECT","BUTTON"].indexOf(o)?o.toLowerCase():i){case"button":case"submit":case"reset":case"hidden":break;case"checkbox":case"radio":"checked"===t&&(e.prop("checked",!0).closest("li").addClass("wpforms-selected"),e.trigger("change"));break;case"select":var n=e.data("choicesjs"),t=t.split(",");n?(t=t.filter(function(e){return""!==e}),n.getValue(!0)!==t&&(n.setChoiceByValue(t),e.trigger("change"))):e.val()!==t&&e.val(t).trigger("change");break;default:e.val()!==t&&e.val(t).trigger("input")}})},processConditionals:function(d,f){var e=k(d),t=e.closest(".wpforms-form"),i=t.data("formid"),p=!1;if("undefined"==typeof wpforms_conditional_logic||void 0===wpforms_conditional_logic[i])return!1;var o,u=wpforms_conditional_logic[i];for(o in u)if(u.hasOwnProperty(o)){window.location.hash&&"#wpformsdebug"===window.location.hash&&console.log("Processing conditionals for Field #"+o+"...");var h,n,m=u[o].logic,g=u[o].action,a=!1;for(h in m)if(m.hasOwnProperty(h)){var w,v=m[h],y=!0;for(w in v)if(v.hasOwnProperty(w)){var r,s=v[w],b="",l=!1,c="";if(window.location.hash&&"#wpformsdebug"===window.location.hash&&console.log(s),s.field){switch(null===(b=x.getElementValueByRule(s,t))&&(b=""),c=k.trim(b).toString().toLowerCase(),r=k.trim(s.value).toString().toLowerCase(),s.operator){case"==":l=c===r;break;case"!=":l=c!==r;break;case"c":l=-1<c.indexOf(r)&&0<c.length;break;case"!c":l=-1===c.indexOf(r)&&0<r.length;break;case"^":l=0===c.lastIndexOf(r,0);break;case"~":l=-1!==c.indexOf(r,c.length-r.length);break;case"e":l=0===c.length;break;case"!e":l=0<c.length;break;case">":l=""!==(c=c.replace(/[^-0-9.]/g,""))&&x.floatval(c)>x.floatval(r);break;case"<":l=""!==(c=c.replace(/[^-0-9.]/g,""))&&x.floatval(c)<x.floatval(r)}if(!l){y=!1;break}}}y&&(a=!0)}window.location.hash&&"#wpformsdebug"===window.location.hash&&console.log("Result: "+a),a&&"hide"===g||!a&&"hide"!==g?(t.find("#wpforms-"+i+"-field_"+o+"-container").hide().addClass("wpforms-conditional-hide").removeClass("wpforms-conditional-show"),p=!0):(n=t.find("#wpforms-"+i+"-field_"+o+"-container"),e.closest(".wpforms-field").attr("id")!==n.attr("id")&&n.hasClass("wpforms-conditional-hide")&&x.resetToDefaults(n),n.show().removeClass("wpforms-conditional-hide").addClass("wpforms-conditional-show"),e.trigger("wpformsShowConditionalsField")),k(document).trigger("wpformsProcessConditionalsField",[i,o,a,g])}p&&(x.resetHiddenFields(t),f&&(window.location.hash&&"#wpformsdebug"===window.location.hash&&console.log("Final Processing"),x.processConditionals(e,!1))),k(document).trigger("wpformsProcessConditionals",[e,t,i])},getElementValueByRule:function(e,t){return t.find("#wpforms-"+t.data("formid")+"-field_"+e.field).data("choicesjs")&&(e.value=k.trim(e.value)),"e"===e.operator||"!e"===e.operator?x.getElementValueByEmptyTypeRules(e,t):x.getElementValueByOtherTypeRules(e,t)},getElementValueByEmptyTypeRules:function(e,t){var i,o=t.data("formid"),n="";if(e.value="",-1<["radio","checkbox","select","payment-multiple","payment-checkbox","rating","net_promoter_score"].indexOf(e.type))i="select"===e.type?"option:selected:not(.placeholder)":"input:checked",t.find("#wpforms-"+o+"-field_"+e.field+"-container "+i).length&&(n=!0);else{if("richtext"===e.type)return x.getRichTextValue(t,o,e.field);n=(n=t.find("#wpforms-"+o+"-field_"+e.field).val())||""}return n},getElementValueByOtherTypeRules:function(e,t){var i=t.data("formid"),o="";if(-1<["radio","checkbox","select","payment-multiple","payment-checkbox","rating","net_promoter_score"].indexOf(e.type)){var n,a="select"===e.type?"option:selected:not(.placeholder)":"input:checked";(a=t.find("#wpforms-"+i+"-field_"+e.field+"-container "+a)).length&&k.each(a,function(){n=x.escapeText(k(this).val()),-1<["checkbox","payment-checkbox","select"].indexOf(e.type)&&e.value!==n||(o=n)})}else{if("richtext"===e.type)return x.getRichTextValue(t,i,e.field);o=t.find("#wpforms-"+i+"-field_"+e.field).val(),-1<["payment-select"].indexOf(e.type)&&(o=x.escapeText(o))}return o},getRichTextValue:function(e,t,i){if(e.find("#wpforms-"+t+"-field_"+i+"-container .wp-editor-wrap").hasClass("html-active"))return e.find("#wpforms-"+t+"-field_"+i).val();e=tinyMCE.get("wpforms-"+t+"-field_"+i);return e?e.getContent({format:"text"}):""},escapeText:function(e){if(null==e||!e.length)return null;var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(e){return t[e]})},floatval:function(e){return parseFloat(e)||0}};x.init(),window.wpformsconditionals=x}(jQuery);