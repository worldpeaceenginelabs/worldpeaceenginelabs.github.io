"use strict";var WPFormsEducation=window.WPFormsEducation||{};WPFormsEducation.proCore=window.WPFormsEducation.proCore||function(t,s,l){var o={init:function(){l(o.ready)},ready:function(){o.events()},events:function(){o.openModalButtonClick(),o.activateButtonClick()},openModalButtonClick:function(){l(t).on("click",".education-modal",function(t){var e=l(this);if(e.data("action")&&!["activate","install"].includes(e.data("action")))switch(t.preventDefault(),t.stopImmediatePropagation(),e.data("action")){case"upgrade":o.upgradeModal(e.data("name"),e.data("field-name"),WPFormsEducation.core.getUTMContentValue(e),e.data("license"),e.data("video"));break;case"license":o.licenseModal()}})},activateButtonClick:function(){l(".wpforms-education-toggle-plugin-btn").on("click",function(t){var e,o,n,a,i=l(this);t.preventDefault(),t.stopImmediatePropagation(),i.hasClass("inactive")||(i.addClass("inactive"),e=i.closest(".wpforms-addon-form, .wpforms-setting-row-education"),o=i.text(),t=i.data("plugin"),n=i.data("action"),a=i.data("type"),i.html(WPFormsAdmin.settings.iconSpinner+o),WPFormsAdmin.setAddonState(t,n,a,function(t){t.success?location.reload():(e.append('<div class="msg error" style="display: none">'+wpforms_admin[a+"_error"]+"</div>"),e.find(".msg").slideDown()),i.text(o),setTimeout(function(){i.removeClass("inactive"),e.find(".msg").slideUp("",function(){l(this).remove()})},5e3)}))})},upgradeModal:function(t,e,o,n,a){var i,r,c,d;void 0!==n&&0!==n.length||(n="pro"),l.inArray(n,["pro","elite"])<0||(i=t+" "+wpforms_education.upgrade[n].title,r=!_.isEmpty(a),c=WPFormsEducation.core.getUpgradeModalWidth(r),void 0!==e&&0<e.length&&(i=e+" "+wpforms_education.upgrade[n].title),d=l.alert({backgroundDismiss:!0,title:i,icon:"fa fa-lock",content:wpforms_education.upgrade[n].message.replace(/%name%/g,t),boxWidth:c,theme:"modern,wpforms-education",closeIcon:!0,onOpenBefore:function(){r&&(this.$el.addClass("upgrade-modal has-video"),this.$btnc.after('<iframe src="'+a+'" class="pro-feature-video" frameborder="0" allowfullscreen="" width="475" height="267"></iframe>')),this.$body.find(".jconfirm-content").addClass("lite-upgrade")},buttons:{confirm:{text:wpforms_education.upgrade[n].button,btnClass:"btn-confirm",keys:["enter"],action:function(){s.open(WPFormsEducation.core.getUpgradeURL(o,n),"_blank")}}}}),l(s).on("resize",function(){c=WPFormsEducation.core.getUpgradeModalWidth(r),d.isOpen()&&d.setBoxWidth(c)}))},licenseModal:function(){l.alert({title:!1,content:wpforms_education.license_prompt,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_education.close,btnClass:"btn-confirm",keys:["enter"]}}})}};return o}(document,window,jQuery),WPFormsEducation.proCore.init();