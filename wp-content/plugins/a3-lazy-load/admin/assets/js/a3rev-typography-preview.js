(function($){a3revTypographyPreview={loadPreviewButtons:function(){a3revTypographyPreview.handleEvents();},handleEvents:function(){$(document).on('click','a.a3rev-ui-typography-preview-button',function(){a3revTypographyPreview.generatePreview($(this));return false;});$(document).on('click','a.preview_remove',function(){a3revTypographyPreview.closePreview($(this));return false;});},closePreview:function(target){target.parents('.section').find('.a3rev-ui-typography-preview-button .refresh').removeClass('refresh');target.parents('.typography-preview-container').remove();},generatePreview:function(target){var previewText='Grumpy wizards make toxic brew for the evil Queen and Jack.';var previewHTML='';var previewStyles='';var controls=target.parents('.a3rev-ui-typography-control');var sizeSelector='.a3rev-ui-typography-size';var fontSize=controls.find(sizeSelector).val();var fontFace=controls.find('.a3rev-ui-typography-face').val();var fontStyle=controls.find('.a3rev-ui-typography-style').val();var fontColor=controls.find('.a3rev-ui-typography-color').val();var lineHeight=controls.find('.a3rev-ui-typography-line_height').val();var nonGoogleFonts=new Array('Arial, sans-serif','Verdana, Geneva, sans-serif','Trebuchet MS, Tahoma, sans-serif','Georgia, serif','Times New Roman, serif','Tahoma, Geneva, Verdana, sans-serif','Palatino, Palatino Linotype, serif','Helvetica Neue, Helvetica, sans-serif','Calibri, Candara, Segoe, Optima, sans-serif','Myriad Pro, Myriad, sans-serif','Lucida Grande, Lucida Sans Unicode, Lucida Sans, sans-serif','Arial Black, sans-serif','Gill Sans, Gill Sans MT, Calibri, sans-serif','Geneva, Tahoma, Verdana, sans-serif','Impact, Charcoal, sans-serif','Courier, Courier New, monospace','Century Gothic, sans-serif');$('.typography-preview').removeClass('current');var fontFaceTest=fontFace.replace(/"/g,'&quot;');if(jQuery.inArray(fontFaceTest,nonGoogleFonts)==-1){var fontFaceString=fontFace;switch(fontFaceString){case 'Allan':case 'Cabin Sketch':case 'Corben':case 'UnifrakturCook':fontFaceString+=':700';break;case 'Buda':case 'Open Sans Condensed':fontFaceString+=':300';break;case 'Coda':case 'Sniglet':fontFaceString+=':800';break;case 'Raleway':fontFaceString+=':100';break;}
fontFaceString+='::latin';fontFaceString=fontFaceString.replace(/ /g,'+');var specificFonts=new Array('Goudy Bookletter 1911');if(jQuery.inArray(fontFace,specificFonts)>-1){var fontFace="'"+fontFace+"'";}
WebFontConfig={google:{families:[fontFaceString]}};if($('script.google-webfonts-script').length){$('script.google-webfonts-script').remove();WebFont.load({google:{families:[fontFaceString]}});}
(function(){var wf=document.createElement('script');wf.src=('https:'==document.location.protocol?'https':'http')+
'://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';wf.type='text/javascript';wf.async='true';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(wf,s);$(wf).addClass('google-webfonts-script');})();}
previewStyles+='font: '+fontStyle+' '+fontSize+'/'+lineHeight+' '+fontFace+';';if(fontColor){previewStyles+=' color: '+fontColor+';';}
var previewHTMLInner=$('<div />').addClass('current').addClass('typography-preview').text(previewText);previewHTML=$('<div />').addClass('typography-preview-container').html(previewHTMLInner).append('<a href="#" class="preview_remove a3-plugin-ui-delete-icon">&nbsp;</a>');if(!controls.next('.typography-preview-container').length){previewHTML.find('.typography-preview').attr('style',previewStyles);controls.after(previewHTML);}else{controls.next('.typography-preview-container').find('.typography-preview').attr('style',previewStyles);}
controls.find('.a3rev-ui-typography-preview-button span').addClass('refresh');}};$(document).ready(function(){a3revTypographyPreview.loadPreviewButtons();});})(jQuery);